{% extends 'base.html' %}

{% load static %}
{% load crispy_forms_tags %}
{% load widget_tweaks %}

{% block titulo %}
Adrofecha - Or√ßamento
{% endblock %}

{% block css %}
<link rel="stylesheet" href="{% static 'Pedidos/css/style.css' %}">
<script src="{% static 'Pedidos/js/Pedidos.js' %}"></script>
{% endblock %}

{% block content %}
<div class="border" style="margin-top: 45px">
    <header class="mt-2 p-1 d-flex inline-block" id=listabotoes>
            <div class="input-group ms-2" role="group" id="btnradios" aria-label="Basic radio toggle button group">
                  <input type="radio" class="btn-check" name="btnradio" id="btnPortaGiro" checked="checked" value="PortaGiro" autocomplete="off">
                  <label class="btn btn-outline-primary border me-3 rounded" for="btnPortaGiro" style="height: 110px; width:140px">
                      <div class="d-flex justify-content-center" style="width:120px">
                          <img src="{% static 'Pedidos/images/PortaGiro.png' %}"  class="border bg-white rounded" style="height: 100px; width:180px">
                      </div>
                  </label>
                  <input type="radio" class="btn-check" name="btnradio" id="btnPortaCorrer" value="PortaCorrer" autocomplete="off">
                  <label class="btn btn-outline-primary border me-3 rounded" for="btnPortaCorrer">
                      <div class="d-flex justify-content-center" style="width:120px">
                          <img src="{% static 'Pedidos/images/PortaCorrer.png' %}"  class="border bg-white rounded" style="height: 100px; width:180px">
                      </div>
                  </label>
                  <input type="radio" class="btn-check" name="btnradio" value="DivisoriaAmbiente" id="btnDivisoria">
                  <label class="btn btn-outline-primary border me-3 rounded" for="btnDivisoria">
                      <div class="d-flex justify-content-center" style="width:120px">
                          <img src="{% static 'Pedidos/images/PortaDivisoria.png' %}"  class="border bg-white rounded" style="height: 100px; width:180px">
                      </div>
                  </label>
                  <input type="radio" class="btn-check" name="btnradio" value="Vidros" id="btnVidro">
                  <label class="btn btn-outline-primary border me-3 rounded" for="btnVidro">
                      <div class="d-flex justify-content-center" style="width:120px">
                          <img src="{% static 'Pedidos/images/Vidro.png' %}"  class="border bg-white rounded" style="height: 100px; width:180px">
                      </div>
                  </label>
            </div>
    </header>
    <hr class="mx-2 mghr">
    <div class="row">
         <div class="row d-flex justify-content-between">
            <div class="col-6 border-end">
                <form>
                    <div class="row mb-1">
                        <div class="row mx-1">
                            <div class="mt-1 col d-flex align-items-center justify-content-start">
                                <label class="me-1" for="{{ form.quantidade.id_for_label }}">
                                    {{ form.quantidade.label_tag }}
                                    {% if form.quantidade.field.required %}{% endif %}
                                </label>
                                {{ form.quantidade|attr:"class:form-control custom-input-size-quantidade" }}
                            </div>
                            <div class="mt-1 col d-flex align-items-center justify-content-center">
                                <label class="me-1" for="{{ form.largura.id_for_label }}">
                                    {{ form.largura.label_tag }}
                                    {% if form.largura.field.required %}{% endif %}
                                </label>
                                {{ form.largura|attr:"class:form-control custom-input-size-medida" }}
                            </div>
                            <div class="mt-1 col d-flex align-items-center justify-content-end">
                                <label class="me-1" for="{{ form.altura.id_for_label }}">
                                    {{ form.altura.label_tag }}
                                    {% if form.altura.field.required %}{% endif %}
                                </label>
                                {{ form.altura|attr:"class:form-control custom-input-size-medida" }}
                            </div>
                        </div>
                        <div class="row mx-3 pt-2">
                            <div class="row" id="divselecao">
                                <div class="col-6 d-flex justify-content-center align-items-center" id="divacabamento">
                                    <label class="me-1" for="{{ form.acabamento.id_for_label }}">
                                        {{ form.acabamento.label_tag }}
                                        {% if form.acabamento.field.required %}{% endif %}
                                    </label>
                                    {{ form.acabamento|attr:"class:form-control custom-input-size-select" }}
                                </div>
                                <div class="col-6 d-flex justify-content-center align-items-center" id="divabertura">
                                    <label class="me-1" for="{{ form.abertura.id_for_label }}">
                                        {{ form.abertura.label_tag }}
                                        {% if form.abertura.field.required %}{% endif %}
                                    </label>
                                    {{ form.abertura|attr:"class:form-control custom-input-size-select" }}
                                </div>
                                <div class="col-6 d-flex justify-content-center align-items-center d-none" id="divlinha">
                                    <label class="me-1" for="{{ form.linha.id_for_label }}">
                                        {{ form.linha.label_tag }}
                                        {% if form.linha.field.required %}{% endif %}
                                    </label>
                                    {{ form.linha|attr:"class:form-control custom-input-size-select" }}
                                </div>
                            </div>
                        </div>
                    </div>
                </form>
                <hr class="mx-2">
<!--                    Menu para giro e correr-->
                <div id="divportas" class="mt-1">
<!--                    Linha Perfil-->
                    <div class="mx-3">
                        <div class="row justify-content-start" id="divperfil">
                            <label for="{{ form.perfil.id_for_label }}">
                                {{ form.perfil.label_tag }}
                                {% if form.perfil.field.required %}{% endif %}
                            </label>
                            <div>
                                {{ form.perfil|attr:"class:form-control custom-input-size-selectitems selectPerfil" }}
                            </div>
                        </div>
                    </div>
<!--                    Linha Perfil Puxador-->
                    <div class="mx-3">
                        <div id="divperfilpuxador">
                            <label for="{{ form.perfilpuxador.id_for_label }}">
                                {{ form.perfilpuxador.label_tag }}
                                {% if form.perfilpuxador.field.required %}{% endif %}
                            </label>
                            <div class="d-flex">
                                <div class="me-1">
                                    {{ form.perfilpuxador|attr:"class:form-control custom-input-size-selectitems selectPerfilPuxador" }}
                                </div>
                                <div class="d-flex" >
                                    <select class="form-control custom-input-qtd flex-grow-1 me-1" id="qtd-perfilpuxador">

                                    </select>
                                    <select class="form-select custom-input-posicao flex-grow-1" id="posicao-perfilpuxador">

                                    </select>
                                </div>
                            </div>
                        </div>
                    </div>
<!--                    Linha Puxador Sobreposto-->
                    <div class="mx-3">
                        <div id="divpuxador">
                            <label for="{{ form.puxador.id_for_label }}">
                                {{ form.puxador.label_tag }}
                                {% if form.puxador.field.required %}{% endif %}
                            </label>
                            <div class="d-flex">
                                <div class="me-1">
                                    {{ form.puxador|attr:"class:form-control custom-input-size-selectitems selectPuxador" }}
                                </div>
                                <div class="d-flex">
                                    <select class="form-control custom-input-qtd flex-grow-1 me-1" id="qtd-puxador">

                                    </select>
                                    <select class="form-select custom-input-posicao flex-grow-1 me-1" id="posicao-puxador">

                                    </select>
                                    <input class="form-control custom-input-size-medida flex-grow-1" id="tam-puxador">
                                </div>
                            </div>
                        </div>
                    </div>
<!--                    Linha Divisor-->
                    <div class="mx-3">
                        <div id="divdivisor">
                            <label for="{{ form.divisor.id_for_label }}">
                                {{ form.divisor.label_tag }}
                                {% if form.divisor.field.required %}{% endif %}
                            </label>
                            <div class="d-flex">
                                <div class="me-1">
                                    {{ form.divisor|attr:"class:form-control custom-input-size-selectitems selectdivisor" }}
                                </div>
                                <div class="d-flex">
                                    <select class="form-control custom-input-qtd flex-grow-1 me-1" id="qtd-divisor">
                                    </select>
                                </div>
                            </div>
                        </div>
                    </div>
<!--                    Linha Vidro-->
                    <div class="mx-3">
                        <div id="divvidro">
                            <label for="{{ form.vidro.id_for_label }}">
                                {{ form.vidro.label_tag }}
                                {% if form.vidro.field.required %}{% endif %}
                            </label>
                            <div class="me-1">
                                {{ form.vidro|attr:"class:form-control custom-input-size-selectitems selectVidro" }}
                            </div>
                        </div>
                    </div>
                </div>
<!--                menu para divisoria ambiente-->
                <div id="divambiente" class="hidden">
                    <!--Linha Superior-->
                    <div class="mx-3">
                        <div class="justify-content-start" id="divsuperior">
                            <label>
                                Superior:
                            </label>
                            <select class="form-control custom-input-divisorias" id="Selectambientesuperior">
                            </select>
                        </div>
                    </div>
<!--                    Linha Inferior-->
                    <div class="mx-3">
                        <div class="justify-content-start" id="divinferior">
                            <label>
                                Inferior:
                            </label>
                            <select class="form-control custom-input-divisorias" id="Selectambienteinferior">
                            </select>
                        </div>
                    </div>
<!--                    Linha Lateral-->
                    <div class="mx-3">
                        <div class="justify-content-start" id="divlateral">
                            <label>
                                Lateral:
                            </label>
                            <select class="form-control custom-input-divisorias" id="Selectambientelateral">
                            </select>
                        </div>
                    </div>
<!--                    Linha Divisor Ambiente-->
                    <div class="mx-3" id="divambientedivisor">
                            <label>
                                Divisor:
                            </label>
                            <div class="d-flex">
                                <select class="form-control custom-input-divisorias" id="Selectambientedivisor">
                                </select>
                                <div class="d-flex">
                                    <select class="form-control custom-input-qtd flex-grow-1 ms-1" id="qtd-divisorambiente">
                                    </select>
                                </div>
                            </div>
                        </div>
<!--                    Linha Vidro Ambiente-->
                    <div class="mx-3">
                        <div class="justify-content-start" id="divambientevidro">
                            <label>
                                Vidro:
                            </label>
                            <select class="form-control custom-input-divisorias" id="Selectambientevidro">
                            </select>
                        </div>
                    </div>
                </div>
<!--                    menu para vidro-->
                <div id="divvidros" class="hidden">
                    <div class="mx-3">
                        <div id="divvidro">
                            <label for="{{ form.vidro.id_for_label }}">
                                {{ form.vidro.label_tag }}
                                {% if form.vidro.field.required %}{% endif %}
                            </label>
                            <div class="me-1">
                                {{ form.vidro|attr:"class:form-control custom-input-size-selectitems selectVidro" }}
                            </div>
                        </div>
                    </div>
                </div>
<!--                botoes finalizar-->
                <div class="mt-1 text-end" style="height: 45px" ;>
                    <a class="btn btn-primary me-2 mt-1" id="btnpedidocancelar" style="width: 90px" ; href="#" role="button" onclick="updatePerfilPuxInferior(); return false;">Cancelar</a>
                    <a class="btn btn-primary me-2 mt-1" id="btnpedidofinalizar" style="width: 90px" ; href="#" role="button" onclick="diminuirOpacidade()">Adicionar</a>
                </div>
            </div>
                <div class="col-6">
                    <div class="svg-content" id="Desenho">
                        <svg id="svg" class="img-responsive" width="100%" viewBox="0 0 640 450"
                             xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
                            <style type="text/css">
                            .st0{fill:#D7D8D7;}
                            .st1{display:none;fill:#F4FDFF;}
                            .st2{display:none;}
                            .st3{display:inline;fill:#137009;}
                            .st4{opacity:0.45;}
                            .st5{fill:url(#Reflexo_1_);}
                            .st6{display:inline;}
                            .st7{font-family:'ArialMT';}
                            .st8{font-size:10.3125px;}
                            .st9{fill:#AF0E0E;}
                            .st10{opacity:0.55;}
                            .st11{fill:url(#SVGID_1_);}
                            .st12{opacity:0.51;}
                            .st13{fill:#4C2F12;}
                            .st14{fill:url(#SVGID_2_);}
                            .st15{fill:url(#SVGID_3_);}
                            .st16{fill:url(#SVGID_4_);}

                            </style>
                            <g id="Porta" transform="translate(200, 40)">
                                <g id="Desenho">
                                    <g id="Perfis">
                                        <polygon id="Perf-D" class="st0"
                                                 points="3.1,57 3.1,293.7 14.1,282.7 14.1,68 		"/>
                                        <polygon id="Perf-C" class="st0"
                                                 points="141.7,282.7 14.1,282.7 3.1,293.7 152.7,293.7 		"/>
                                        <polygon id="Perf-B" class="st0"
                                                 points="141.7,68 141.7,282.7 152.7,293.7 152.7,57 		"/>
                                        <polygon id="Perf-A" class="st0"
                                                 points="152.7,57 3.1,57 14.1,68 141.7,68 		"/>
                                    </g>
                                    <rect id="Pelicula" x="3.1" y="57" class="st1" width="149.6" height="236.8"/>
                                    <g id="Divisores" class="st2">
                                        <rect id="Divisor-C" x="14.1" y="210.4" class="st3" width="127.6" height="4.3"/>
                                        <rect id="Divisor-B" x="14.1" y="173.1" class="st3" width="127.6" height="4.3"/>
                                        <rect id="Divisor-A" x="14.1" y="137" class="st3" width="127.6" height="4.3"/>
                                    </g>
                                    <g id="Vidro" class="st2">

                                        <image style="display:inline;overflow:visible;opacity:0.35;enable-background:new    ;"
                                               width="113" height="196" id="Incolor"
                                               xlink:href="../../Documents/Sistema/Pedidos/static/Pedidos/images/Vidro-incolor.png"
                                               transform="matrix(1.324 0 0 1.2079 3.0703 56.9531)">
                                        </image>
                                        <g class="st4">

                                            <linearGradient id="Reflexo_1_" gradientUnits="userSpaceOnUse"
                                                            x1="-1130.3203"
                                                            y1="526.6828" x2="-854.8268" y2="526.6828"
                                                            gradientTransform="matrix(3.858301e-11 -0.8594 0.8594 3.858301e-11 -374.7534 -677.6826)">
                                                <stop offset="0" style="stop-color:#DEF7FF"/>
                                                <stop offset="9.815443e-02" style="stop-color:#BBD4DC"/>
                                                <stop offset="0.2746" style="stop-color:#839CA4"/>
                                                <stop offset="0.4461" style="stop-color:#546D75"/>
                                                <stop offset="0.6084" style="stop-color:#304951"/>
                                                <stop offset="0.7592" style="stop-color:#152E36"/>
                                                <stop offset="0.8941" style="stop-color:#061F27"/>
                                                <stop offset="1" style="stop-color:#001921"/>
                                            </linearGradient>
                                            <path id="Reflexo" class="st5" d="M152.5,293.3H3.3C2.8,305.2,3.3,57,3.3,57c8.8,0,143.2-0.1,149.2,0
				C152.5,57,152.9,301.6,152.5,293.3z"/>
                                        </g>
                                    </g>
                                    <g id="Acabamento" class="st2">
                                        <g id="Acabamento-D" class="st6">

                                            <image style="overflow:visible;opacity:0.3;enable-background:new    ;"
                                                   width="33" height="268"
                                                   xlink:href="../../Documents/Sistema/Pedidos/static/Pedidos/images/C727B484.png"
                                                   transform="matrix(1 0 0 0.9508 -7 46)">
                                            </image>
                                            <g>
                                                <polygon class="st0"
                                                         points="3.1,293.7 3.1,57 5.1,59 5.1,291.6 				"/>
                                            </g>
                                        </g>
                                        <g id="Acabamento-C" class="st6">

                                            <image style="overflow:visible;opacity:0.3;enable-background:new    ;"
                                                   width="180" height="33"
                                                   xlink:href="../../Documents/Sistema/Pedidos/static/Pedidos/images/C727B48C.png"
                                                   transform="matrix(0.9228 0 0 1 -3.099 271)">
                                            </image>
                                            <g>
                                                <polygon class="st0"
                                                         points="3.1,293.7 5.1,291.6 150.6,291.6 152.7,293.7 				"/>
                                            </g>
                                        </g>
                                        <g id="Acabamento-B" class="st6">

                                            <image style="overflow:visible;opacity:0.3;enable-background:new    ;"
                                                   width="33" height="268"
                                                   xlink:href="../../Documents/Sistema/Pedidos/static/Pedidos/images/C727B485.png"
                                                   transform="matrix(1 0 0 0.9562 130 47.7327)">
                                            </image>
                                            <g>
                                                <polygon class="st0"
                                                         points="152.7,57 152.7,293.7 150.6,291.6 150.6,59 				"/>
                                            </g>
                                        </g>
                                        <g id="Acabamento-A" class="st6">

                                            <image style="overflow:visible;opacity:0.3;enable-background:new    ;"
                                                   width="180" height="34"
                                                   xlink:href="../../Documents/Sistema/Pedidos/static/Pedidos/images/C727B486.png"
                                                   transform="matrix(0.8438 0 0 1 0.8218 46)">
                                            </image>
                                            <g>
                                                <polygon class="st0"
                                                         points="5.1,59 3.1,57 152.7,57 150.6,59 				"/>
                                            </g>
                                        </g>
                                    </g>
                                    <g id="Puxadores_2_" class="st2">
                                        <g id="Puxador-D">
                                            <text id="Tam-pux-D"
                                                  transform="matrix(4.489659e-11 -1 1 4.489659e-11 -8.3213 192.4824)"
                                                  class="st7 st8">100mm
                                            </text>
                                            <rect id="Puxador-esq-int" x="-6" y="56.9" class="st9" width="2.6"
                                                  height="236.8"/>
                                            <rect id="Puxador-esq-trecho" x="-6" y="153.8" class="st9" width="2.6"
                                                  height="43"/>
                                        </g>
                                        <g id="Puxador-C">
                                            <text id="Tam-pux-C" transform="matrix(1 0 0 1 60.5996 313.127)"
                                                  class="st7 st8">100mm
                                            </text>
                                            <rect id="Puxador-sup-int_1_" x="3" y="301.2" class="st9" width="149.6"
                                                  height="2.6"/>
                                            <rect id="Puxador-sup-trecho_1_" x="56.4" y="301.2" class="st9" width="43"
                                                  height="2.6"/>
                                        </g>
                                        <g id="Puxador-B">
                                            <text id="Tam-pux-B"
                                                  transform="matrix(-1.346898e-10 1 -1 -1.346898e-10 165.0195 158.0955)"
                                                  class="st7 st8">100mm
                                            </text>
                                            <rect id="Puxador-dir-int" x="159.6" y="56.9" class="st9" width="2.6"
                                                  height="236.8"/>
                                            <rect id="Puxador-dir-trecho" x="159.6" y="153.8" class="st9" width="2.6"
                                                  height="43"/>
                                        </g>
                                        <g id="Puxador-A">
                                            <text id="Tam-pux-A" transform="matrix(1 0 0 1 60.6853 44.96)"
                                                  class="st7 st8">
                                                100mm
                                            </text>
                                            <rect id="Puxador-sup-int" x="3.1" y="46.8" class="st9" width="149.6"
                                                  height="2.6"/>
                                            <rect id="Puxador-sup-trecho" x="56.4" y="46.8" class="st9" width="43"
                                                  height="2.6"/>
                                        </g>
                                    </g>
                                    <g id="PerfisPuxadores">
                                        <g id="PerfilPux-D">
                                            <g id="PerfilPux-D-Cava" class="st10">
                                                <g>

                                                    <linearGradient id="SVGID_1_" gradientUnits="userSpaceOnUse"
                                                                    x1="-187.7436" y1="5.8975" x2="-183.0359"
                                                                    y2="5.8975"
                                                                    gradientTransform="matrix(-1 0 0 -1 -184.6733 181.2475)">
                                                        <stop offset="0" style="stop-color:#252525"/>
                                                        <stop offset="0.25"
                                                              style="stop-color:#252525;stop-opacity:0.3"/>
                                                        <stop offset="0.5" style="stop-color:#F1F1F1"/>
                                                        <stop offset="0.5112" style="stop-color:#FFFFFF"/>
                                                        <stop offset="0.75"
                                                              style="stop-color:#919191;stop-opacity:0.3"/>
                                                        <stop offset="1" style="stop-color:#252525"/>
                                                    </linearGradient>
                                                    <polyline class="st11"
                                                              points="3.1,293.7 -1.6,293.7 -1.6,57 3.1,57 					"/>
                                                </g>
                                                <g class="st12">
                                                    <polyline class="st13"
                                                              points="3.1,293.7 -1.6,293.7 -1.6,57 3.1,57 					"/>
                                                </g>
                                            </g>
                                            <rect id="PerfilPux-D-detalhe" x="-3.4" y="57" class="st0" width="1.7"
                                                  height="236.8"/>
                                        </g>
                                        <g id="PerfilPux-C">
                                            <g id="PerfilPux-C-Cava" class="st10">
                                                <g>

                                                    <linearGradient id="SVGID_2_" gradientUnits="userSpaceOnUse"
                                                                    x1="-93.5561" y1="40.5658" x2="-88.8484"
                                                                    y2="40.5658"
                                                                    gradientTransform="matrix(-1.346898e-10 1 -1 -1.346898e-10 118.4158 387.2673)">
                                                        <stop offset="0" style="stop-color:#252525"/>
                                                        <stop offset="0.25"
                                                              style="stop-color:#252525;stop-opacity:0.3"/>
                                                        <stop offset="0.5" style="stop-color:#F1F1F1"/>
                                                        <stop offset="0.5112" style="stop-color:#FFFFFF"/>
                                                        <stop offset="0.75"
                                                              style="stop-color:#919191;stop-opacity:0.3"/>
                                                        <stop offset="1" style="stop-color:#252525"/>
                                                    </linearGradient>
                                                    <polyline class="st14"
                                                              points="152.6,293.7 152.6,298.4 3.1,298.4 3.1,293.7 					"/>
                                                </g>
                                                <g class="st12">
                                                    <polyline class="st13"
                                                              points="152.6,293.7 152.6,298.4 3.1,298.4 3.1,293.7 					"/>
                                                </g>
                                            </g>
                                            <rect id="PerfilPux-C-detalhe" x="3.1" y="298.4" class="st0" width="149.6"
                                                  height="1.7"/>
                                        </g>
                                        <g id="PerfilPux-B">
                                            <g id="PerfilPux-B-Cava" class="st10">
                                                <g>

                                                    <linearGradient id="SVGID_3_" gradientUnits="userSpaceOnUse"
                                                                    x1="-247.3661" y1="145.35" x2="-242.6584"
                                                                    y2="145.35"
                                                                    gradientTransform="matrix(1 0 0 1 400 30)">
                                                        <stop offset="0" style="stop-color:#252525"/>
                                                        <stop offset="0.25"
                                                              style="stop-color:#252525;stop-opacity:0.3"/>
                                                        <stop offset="0.5" style="stop-color:#F1F1F1"/>
                                                        <stop offset="0.5112" style="stop-color:#FFFFFF"/>
                                                        <stop offset="0.75"
                                                              style="stop-color:#919191;stop-opacity:0.3"/>
                                                        <stop offset="1" style="stop-color:#252525"/>
                                                    </linearGradient>
                                                    <polyline class="st15"
                                                              points="152.6,57 157.3,57 157.3,293.7 152.6,293.7 					"/>
                                                </g>
                                                <g class="st12">
                                                    <polyline class="st13"
                                                              points="152.6,57 157.3,57 157.3,293.7 152.6,293.7 					"/>
                                                </g>
                                            </g>
                                            <rect id="PerfilPux-B-detalhe" x="157.3" y="57" class="st0" width="1.7"
                                                  height="236.8"/>
                                        </g>
                                        <g id="PerfilPux-A">
                                            <g id="PerfilPux-A-Cava" class="st10">
                                                <g>

                                                    <linearGradient id="SVGID_4_" gradientUnits="userSpaceOnUse"
                                                                    x1="1.0268"
                                                                    y1="204.246" x2="5.7344" y2="204.246"
                                                                    gradientTransform="matrix(2.244830e-10 -1 1 2.244830e-10 -126.396 57.9802)">
                                                        <stop offset="0" style="stop-color:#252525"/>
                                                        <stop offset="0.25"
                                                              style="stop-color:#252525;stop-opacity:0.3"/>
                                                        <stop offset="0.5" style="stop-color:#F1F1F1"/>
                                                        <stop offset="0.5112" style="stop-color:#FFFFFF"/>
                                                        <stop offset="0.75"
                                                              style="stop-color:#919191;stop-opacity:0.3"/>
                                                        <stop offset="1" style="stop-color:#252525"/>
                                                    </linearGradient>
                                                    <polyline class="st16"
                                                              points="3.1,57 3.1,52.2 152.6,52.2 152.6,57 					"/>
                                                </g>
                                                <g class="st12">
                                                    <polyline class="st13"
                                                              points="3.1,57 3.1,52.2 152.6,52.2 152.6,57 					"/>
                                                </g>
                                            </g>
                                            <rect id="PerfilPux-A-detalhe" x="3.1" y="50.5" class="st0" width="149.6"
                                                  height="1.7"/>
                                        </g>
                                    </g>
                                </g>
                                <g id="MedidaDesenho">
                                    <g id="Largura-Desenho">
                                        <text id="Medida-largura" transform="matrix(1 0 0 1 60.6856 352.6522)"
                                              class="st7 st8">100mm
                                        </text>
                                        <polygon id="Traco-largura" points="3.7,334.2 3.1,334.2 3.1,349 3.7,349 3.7,342.9 152,342.9 152,349 152.7,349 152.7,334.2
				152,334.2 152,340.3 3.7,340.3"/>
                                    </g>
                                    <g id="Altura-Desenho">
                                        <text id="Medida-altura"
                                              transform="matrix(-1.346898e-10 1 -1 -1.346898e-10 212.3477 158.1368)"
                                              class="st7 st8">100mm
                                        </text>
                                        <polygon id="Traco-altura" points="214.6,57.9 214.6,57 199.9,57 199.9,57.9 206,57.9 206,292.7 199.9,292.7 199.9,293.7
				214.6,293.7 214.6,292.7 208.5,292.7 208.5,57.9 			"/>
                                    </g>
                                </g>
                            </g>
                        </svg>
                    </div>
                </div>
             </div>
         <div class="row d-flex justify-content-between">
            <div class=""><!-- Tabelas-->
               <div class="row mt-1 ms-1 mb-2">
                    <div class="col-6 border table-responsive">
                        <header>
                            <h2 class="bg-warning text-dark text-center fs-6 fw-bold">Insumos</h2>
                            <table class="table table-sm">
                                <thead>
                                    <tr>
                                      <th scope="col">Id</th>
                                      <th scope="col">C√≥digo</th>
                                      <th scope="col">Descri√ß√£o</th>
                                      <th scope="col">Quant(m)</th>
                                      <th scope="col">Valor</th>
                                      <th scope="col">Subtotal</th>
                                    </tr>
                                </thead>
                                <tbody class="table-group-divider">
                                    <tr>
                                      <th scope="row">1</th>
                                      <td>010098</td>
                                      <td>3579 Anodizado (3579)</td>
                                      <td>4</td>
                                      <td>R$42,50</td>
                                      <td>R$170,52</td>
                                    </tr>
                                    <tr>
                                      <th scope="row">1</th>
                                      <td>013799</td>
                                      <td>4007 Anodizado (4007)</td>
                                      <td>2</td>
                                      <td>R$58,07</td>
                                      <td>R$116,13</td>
                                    </tr>
                                    <tr>
                                      <th scope="row">1</th>
                                      <td>008787</td>
                                      <td>Acidato Prata 4MM</td>
                                      <td>2</td>
                                      <td>R$245,50</td>
                                      <td>R$491,00</td>
                                    </tr>
                                </tbody>
                            </table>
                        </header>
                    </div>
                    <div class="col-6 border table-responsive">
                        <header>
                            <h2 class="bg-warning text-dark text-center fs-6 fw-bold ">Itens do Or√ßamento</h2>
                                <table class="table table-sm ">
                                    <thead>
                                        <tr>
                                          <th scope="col">Id</th>
                                          <th scope="col">Qt</th>
                                          <th scope="col">Descri√ß√£o</th>
                                          <th scope="col">Valor</th>
                                        </tr>
                                    </thead>
                                    <tbody class="table-group-divider">
                                        <tr>
                                          <th scope="row">1</th>
                                          <td>1</td>
                                          <td>Porta 3579/204 Anodizado 4mm</td>
                                          <td>R$100,00</td>
                                        </tr>
                                        <tr>
                                          <th scope="row">2</th>
                                          <td>2</td>
                                          <td>Porta 3579 Anodizado 4mm</td>
                                          <td>R$256,00</td>
                                        </tr>
                                        <tr>
                                          <th scope="row">3</th>
                                          <td>4</td>
                                          <td>Porta 3443/105 Escovado 4mm</td>
                                          <td>R$256,00</td>
                                        </tr>
                                        <tr>
                                          <th scope="row">4</th>
                                          <td>5</td>
                                          <td>Porta 3443/105 Escovado 4mm</td>
                                          <td>R$229,00</td>
                                        </tr>
                                        <tr>
                                          <th scope="row">5</th>
                                          <td>6</td>
                                          <td>Porta 3443/105 Escovado 4mm</td>
                                          <td>R$310,00</td>
                                        </tr>
                                    </tbody>
                                </table>
                        </header>
                    </div>
                </div>
            </div>
         </div>
    </div>
</div>

<script>
function rotacionarGrupo() {
    var grupoVidro = document.getElementById('Desenho');
    var largura = parseFloat($('#id_largura').val());
    var altura = parseFloat($('#id_altura').val());

    // Define o ponto de rota√ß√£o no centro do grupo
    grupoVidro.style.transformBox = 'fill-box';
    grupoVidro.style.transformOrigin = 'center center';

    // Define o √¢ngulo da rota√ß√£o com base na largura e altura
    var angle = (largura > altura) ? -90 : 0;

    // Cria a anima√ß√£o usando Anime.js para o grupo Vidro
    anime({
        targets: grupoVidro,
        rotate: angle,
        duration: 1000, // Dura√ß√£o da anima√ß√£o em milissegundos
        easing: 'easeInOutQuad' // Efeito de easing da anima√ß√£o
    });

    // Atualize a anima√ß√£o dos alvos SVG
    updateAnimation();
}

function updateAnimation() {
    const largura = parseFloat($('#id_largura').val());
    const altura = parseFloat($('#id_altura').val());

    const targets = [
        // ... (mantenha os objetos como est√£o)
    ];

    targets.forEach(({ target, initialPoints, finalPoints }) => {
        const points = (largura > altura) ? finalPoints : initialPoints;
        animateSVGTargets(target, initialPoints, points);
    });
}

$(document).ready(function() {
    $('#id_largura, #id_altura').on('blur', function() {
        rotacionarGrupo();
    });
});
</script>


<script>
    const larguraInput = document.getElementById("id_largura");
    const alturaInput = document.getElementById("id_altura");

    larguraInput.addEventListener("input", formatarValor);
    alturaInput.addEventListener("input", formatarValor);

    function formatarValor(event) {
        const input = event.target;
        let valor = input.value;

        // Remova qualquer n√£o n√∫mero e ponto decimal adicional
        valor = valor.replace(/[^0-9.]/g, '');

        // Separe os valores inteiros e decimais
        const partes = valor.split('.');
        let parteInteira = partes[0];
        let parteDecimal = partes[1] || '';

        // Limita a parte inteira a 4 d√≠gitos (9.999)
        if (parteInteira.length > 4) {
            parteInteira = parteInteira.slice(0, 4);
        }

        // Limita a parte decimal a 3 d√≠gitos
        if (parteDecimal.length > 3) {
            parteDecimal = parteDecimal.slice(0, 3);
        }

        // Formata novamente com a parte decimal
        valor = parteInteira + (parteDecimal ? '.' + parteDecimal : '');

        // Se o valor formatado n√£o for um n√∫mero v√°lido, use o valor anterior
        if (isNaN(parseFloat(valor))) {
            valor = input.value;
        }

        input.value = valor;
    }
</script>

<script>
  document.addEventListener("DOMContentLoaded", function () {
    const svgObject = document.getElementById("svgObject");

    // Carregar o SVG e adicionar evento de carregamento
    svgObject.addEventListener("load", function () {
      const svgDocument = svgObject.contentDocument; // Acessar o conte√∫do do SVG

      // Fun√ß√£o para adicionar ou remover classes de acordo com o valor do elemento "id_perfil"
      function ajustarClassesDoPerfil() {
        const idPerfil = document.getElementById("id_perfil").value;

        // Selecionar os elementos pelos seus ids
        const perfSuperior = svgDocument.getElementById("Perf-Superior");
        const perfInferior = svgDocument.getElementById("Perf-Inferior");
        const perfDireita = svgDocument.getElementById("Perf-Direita");
        const perfEsquerda = svgDocument.getElementById("Perf-Esquerda");
        const MedidaDesenho = svgDocument.getElementById("Medida_Desenho");

        // Verificar se o valor do elemento com id="id_perfil" est√° vazio
        if (idPerfil === "") {
          // Caso esteja vazio, ocultar com a classe st3 e remover a classe st9
          perfSuperior.classList.add("st3");
          perfSuperior.classList.remove("st9");

          perfInferior.classList.add("st3");
          perfInferior.classList.remove("st9");

          perfDireita.classList.add("st3");
          perfDireita.classList.remove("st9");

          perfEsquerda.classList.add("st3");
          perfEsquerda.classList.remove("st9");

          MedidaDesenho.classList.add("st3");
          MedidaDesenho.classList.remove("st9");

          // Atualizar medidas no SVG quando o perfil estiver vazio
          const alturaInput = document.getElementById("id_altura");
          const larguraInput = document.getElementById("id_largura");
          const medidaAlturaText = svgDocument.getElementById("Medida-altura");
          const medidaLarguraText = svgDocument.getElementById("Medida-largura");

          atualizarMedida(alturaInput, medidaAlturaText);
          atualizarMedida(larguraInput, medidaLarguraText);
        } else {
          // Caso tenha um valor selecionado, remover a classe st3 e adicionar a classe st9
          perfSuperior.classList.remove("st3");
          perfSuperior.classList.add("st9");

          perfInferior.classList.remove("st3");
          perfInferior.classList.add("st9");

          perfDireita.classList.remove("st3");
          perfDireita.classList.add("st9");

          perfEsquerda.classList.remove("st3");
          perfEsquerda.classList.add("st9");

          MedidaDesenho.classList.remove("st3");
          MedidaDesenho.classList.add("st9");
        }
      }

      // Adicionar um evento para detectar mudan√ßas no valor do elemento com id="id_perfil"
      document.getElementById("id_perfil").addEventListener("change", ajustarClassesDoPerfil);

      // Chamar a fun√ß√£o inicialmente para configurar as classes de acordo com o valor inicial
      ajustarClassesDoPerfil();

      // Atualizar as medidas quando o perfil for carregado
      const alturaInput = document.getElementById("id_altura");
      const larguraInput = document.getElementById("id_largura");
      const medidaAlturaText = svgDocument.getElementById("Medida-altura");
      const medidaLarguraText = svgDocument.getElementById("Medida-largura");

      alturaInput.addEventListener("input", function () {
        atualizarMedida(alturaInput, medidaAlturaText);
      });

      larguraInput.addEventListener("input", function () {
        atualizarMedida(larguraInput, medidaLarguraText);
      });
    });
  });

  // Fun√ß√£o para atualizar a medida no campo de texto do SVG
  function atualizarMedida(campoInput, campoMedida) {
    const valor = campoInput.value;
    if (campoMedida) {
      campoMedida.textContent = valor + "mm";
    }
  }
</script>

<script>
$(document).ready(function() {
  function atualizarPosicoesPerfilPuxador() {
    var qtdPerfilPuxador = $("#qtd-perfilpuxador").val();
    var perfilPuxador = $("#id_perfilpuxador").val();
    var abertura = $("#id_abertura").val();
    var posicaoPerfilPuxador = $("#posicao-perfilpuxador");

    posicaoPerfilPuxador.empty();

    if (qtdPerfilPuxador === "2") {
      if ($("#btnPortaCorrer").is(":checked")) {
        posicaoPerfilPuxador.append($('<option>', {value: 'Esq/Dir', text: 'Esq/Dir'}));
      }
    } else if (qtdPerfilPuxador === "1") {
        if ($("#btnPortaCorrer").is(":checked")) {
          posicaoPerfilPuxador.append($('<option>', {value: 'Direita', text: 'Direita'}));
          posicaoPerfilPuxador.append($('<option>', {value: 'Esquerda', text: 'Esquerda'}));
        } else if ($("#btnPortaGiro").is(":checked")) {
            if (abertura === "D") {
              posicaoPerfilPuxador.append($('<option>', {value: 'Esquerda', text: 'Esquerda'}));
              posicaoPerfilPuxador.append($('<option>', {value: 'Topo', text: 'Topo'}));
              posicaoPerfilPuxador.append($('<option>', {value: 'Base', text: 'Base'}));
            } else if (abertura === "E") {
              posicaoPerfilPuxador.append($('<option>', {value: 'Direita', text: 'Direita'}));
              posicaoPerfilPuxador.append($('<option>', {value: 'Topo', text: 'Topo'}));
              posicaoPerfilPuxador.append($('<option>', {value: 'Base', text: 'Base'}));
            } else if (abertura === "C") {
              posicaoPerfilPuxador.append($('<option>', {value: 'Base', text: 'Base'}));
            } else if (abertura === "B") {
              posicaoPerfilPuxador.append($('<option>', {value: 'Topo', text: 'Topo'}));
            }
        }
    }
  }

  function atualizarQtdPerfilPuxador() {
    var perfilPuxador = $("#id_perfilpuxador").val();
    var qtdPerfilPuxador = $("#qtd-perfilpuxador");

    qtdPerfilPuxador.empty();

    if ($("#btnPortaGiro").is(":checked")) {
      if (perfilPuxador && perfilPuxador !== "") {
        qtdPerfilPuxador.append($('<option>', {value: '1', text: '1'}));
      }
    } else if ($("#btnPortaCorrer").is(":checked")) {
      if (perfilPuxador && perfilPuxador !== "") {
        qtdPerfilPuxador.append($('<option>', {value: '1', text: '1'}));
        qtdPerfilPuxador.append($('<option>', {value: '2', text: '2'}));
      }
    }
  }

  $("#id_perfilpuxador").change(function() {
    atualizarQtdPerfilPuxador();
    atualizarPosicoesPerfilPuxador();
  });

  $("#qtd-perfilpuxador").change(function() {
    atualizarPosicoesPerfilPuxador();
  });

  $("#id_abertura").change(function() {
    atualizarPosicoesPerfilPuxador();
  });

  $("input[name='btnradio']").change(function() {
    atualizarQtdPerfilPuxador();
    atualizarPosicoesPerfilPuxador();
  });
});
</script>

<script>
$(document).ready(function() {
  function atualizarPosicoesPuxador() {
    var qtdPuxador = $("#qtd-puxador").val();
    var Puxador = $("#id_puxador").val();
    var abertura = $("#id_abertura").val();
    var posicaoPuxador = $("#posicao-puxador");

    posicaoPuxador.empty();

    if (qtdPuxador === "2") {
      if ($("#btnPortaCorrer").is(":checked")) {
        posicaoPuxador.append($('<option>', {value: 'Esq/Dir', text: 'Esq/Dir'}));
      }
    } else if (qtdPuxador === "1") {
        if ($("#btnPortaCorrer").is(":checked")) {
          posicaoPuxador.append($('<option>', {value: 'Direita', text: 'Direita'}));
          posicaoPuxador.append($('<option>', {value: 'Esquerda', text: 'Esquerda'}));
        } else if ($("#btnPortaGiro").is(":checked")) {
            if (abertura === "D") {
              posicaoPuxador.append($('<option>', {value: 'Esquerda', text: 'Esquerda'}));
              posicaoPuxador.append($('<option>', {value: 'Topo', text: 'Topo'}));
              posicaoPuxador.append($('<option>', {value: 'Base', text: 'Base'}));
            } else if (abertura === "E") {
              posicaoPuxador.append($('<option>', {value: 'Direita', text: 'Direita'}));
              posicaoPuxador.append($('<option>', {value: 'Topo', text: 'Topo'}));
              posicaoPuxador.append($('<option>', {value: 'Base', text: 'Base'}));
            } else if (abertura === "C") {
              posicaoPuxador.append($('<option>', {value: 'Base', text: 'Base'}));
            } else if (abertura === "B") {
              posicaoPuxador.append($('<option>', {value: 'Topo', text: 'Topo'}));
            }
        }
    }
  }

  function atualizarQtdPuxador() {
    var Puxador = $("#id_puxador").val();
    var qtdPuxador = $("#qtd-puxador");

    qtdPuxador.empty();

    if ($("#btnPortaGiro").is(":checked")) {
      if (Puxador && Puxador !== "") {
        qtdPuxador.append($('<option>', {value: '1', text: '1'}));
      }
    } else if ($("#btnPortaCorrer").is(":checked")) {
      if (Puxador && Puxador !== "") {
        qtdPuxador.append($('<option>', {value: '1', text: '1'}));
        qtdPuxador.append($('<option>', {value: '2', text: '2'}));
      }
    }
  }

  $("#id_puxador").change(function() {
    atualizarQtdPuxador();
    atualizarPosicoesPuxador();
  });

  $("#qtd-puxador").change(function() {
    atualizarPosicoesPuxador();
  });

  $("#id_abertura").change(function() {
    atualizarPosicoesPuxador();
  });

  $("input[name='btnradio']").change(function() {
    atualizarQtdPuxador();
    atualizarPosicoesPuxador();
  });
});
</script>

<script>
$(document).ready(function() {
  $('#id_acabamento, #id_quantidade, #id_largura, #id_altura, #id_abertura').change(filtrarPerfil);

  function filtrarPerfil() {
    var acabamento = $('#id_acabamento').val();
    var quantidade = $('#id_quantidade').val();
    var largura = $('#id_largura').val();
    var altura = $('#id_altura').val();
    var abertura = $('#id_abertura').val();
    var perfilField = $('#id_perfil');
    var perfilDiv = $('#divperfil');
    var campoPortas = $('#divportas');
    var portaGiroRadioButton = $('#btnPortaGiro');
    var portaCorrerRadioButton = $('#btnPortaCorrer');

    // Verificar se o radiobutton selecionado √© PortaGiro
    if (portaGiroRadioButton.is(':checked')) {
      if (quantidade && largura && altura && acabamento && abertura) {
        perfilField.prop('disabled', false);
        perfilDiv.find(':input').prop('disabled', false);

        $.ajax({
          url: '/filtrar_acabamento/',
          type: 'GET',
          data: {
            acabamento: acabamento
          },
          success: function(response) {
            perfilField.empty();

            var option = $('<option>').attr('value', '').text('-------');
            perfilField.append(option);

            $.each(response, function(index, item) {
              option = $('<option>').attr('value', item.id).text(item.descricao);
              perfilField.append(option);
            });

            perfilField.show();
          },
          error: function(xhr) {
            console.log(xhr.statusText);
          }
        });
      } else {
        campoPortas.prop('disabled', true);
        campoPortas.find(':input').prop('disabled', true);
        perfilField.empty();
      }
    } else if (portaCorrerRadioButton.is(':checked')) {
      if (quantidade && largura && altura && acabamento) {
        perfilField.prop('disabled', false);
        perfilDiv.find(':input').prop('disabled', false);

        $.ajax({
          url: '/filtrar_acabamento/',
          type: 'GET',
          data: {
            acabamento: acabamento
          },
          success: function(response) {
            perfilField.empty();

            var option = $('<option>').attr('value', '').text('-------');
            perfilField.append(option);

            $.each(response, function(index, item) {
              option = $('<option>').attr('value', item.id).text(item.descricao);
              perfilField.append(option);
            });

            perfilField.show();
          },
          error: function(xhr) {
            console.log(xhr.statusText);
          }
        });
      }
    } else {
      // Manter o campo perfil bloqueado para outros radiobuttons selecionados
      perfilField.prop('disabled', true);
      perfilDiv.find(':input').prop('disabled', true);
      perfilField.empty();
    }
  }

  // Chamar a fun√ß√£o filtrarPerfil inicialmente
  filtrarPerfil();
});
</script>

<script>
$(document).ready(function() {
  $('#id_perfil').change(function() {
    buscarPerfilPuxador();
  });

  function buscarPerfilPuxador() {
    var perfil = $('#id_perfil').val();

    if (perfil) {
      $.ajax({
        url: '/buscar_PerfilPuxador/',
        type: 'GET',
        data: {
          perfil: perfil
        },
        success: function(response) {
          var selectPerfilPuxador = $('#id_perfilpuxador');
          selectPerfilPuxador.empty();

          var option = $('<option>').attr('value', '').text('-------');
          selectPerfilPuxador.append(option);

          $.each(response, function(index, item) {
            option = $('<option>').attr('value', item.id).text(item.descricao);
            selectPerfilPuxador.append(option);
          });

          var numItens = response.length;

          if (numItens <= 0) {
            selectPerfilPuxador.prop('disabled', true);
            $('#divperfilpuxador :input').prop('disabled', true);
          } else {
            selectPerfilPuxador.prop('disabled', false);
            $('#divperfilpuxador :input').prop('disabled', false);
          }

          selectPerfilPuxador.show();
        },
        error: function(xhr) {
          console.log(xhr.statusText);
        }
      });
    } else {
      $('#id_perfilpuxador').empty();
      $('#divperfilpuxador :input').prop('disabled', true);
    }
  }
});
</script>

<script>
$(document).ready(function() {
  $('#id_perfil').change(function() {
    limparCamposPortas();
    buscarDivisor();
    limparCampoVidro();
  });

  function buscarDivisor() {
    var perfil = $('#id_perfil').val();

    if (perfil) {
      $.ajax({
        url: '/buscar_Divisor/',
        type: 'GET',
        data: {
          perfil: perfil
        },
        success: function(response) {
          var selectDivisor = $('#id_divisor');
          selectDivisor.empty();

          var option = $('<option>').attr('value', '').text('-------');
          selectDivisor.append(option);

          $.each(response, function(index, item) {
            option = $('<option>').attr('value', item.id).text(item.descricao);
            selectDivisor.append(option);
          });

          var numItens = response.length;

          if (numItens <= 0) {
            selectDivisor.prop('disabled', true);
            $('#divdivisor :input').prop('disabled', true);
          } else {
            selectDivisor.prop('disabled', false);
            $('#divdivisor :input').prop('disabled', false);
          }

          selectDivisor.show();
        },
        error: function(xhr) {
          console.log(xhr.statusText);
        }
      });
    } else {
      $('#id_divisor').empty();
      $('#divdivisor :input').prop('disabled', true);
    }
  }

  function limparCamposPortas() {
    $('#divportas input:not(#id_perfil), #divportas select:not(#id_perfil)').each(function() {
      $(this).val('').prop('disabled', true);
    });
  }

  // Fun√ß√£o para limpar o campo id_vidro
  function limparCampoVidro() {
    $('#id_vidro').val('');
  }
});

</script>

<script>
$(document).ready(function() {
  $('#id_perfil').change(function() {
    buscarPuxador();
  });

  function buscarPuxador() {
    var perfil = $('#id_perfil').val();

    if (perfil) {
      $.ajax({
        url: '/buscar_Puxador/',
        type: 'GET',
        data: {
          perfil: perfil
        },
        success: function(response) {
          var selectPuxador = $('#id_puxador');
          selectPuxador.empty();

          var option = $('<option>').attr('value', '').text('-------');
          selectPuxador.append(option);

          $.each(response, function(index, item) {
            option = $('<option>').attr('value', item.id).text(item.descricao);
            selectPuxador.append(option);
          });

          var numItens = response.length;

          if (numItens <= 0) {
            selectPuxador.prop('disabled', true);
            $('#divpuxador :input').prop('disabled', true);
          } else {
            selectPuxador.prop('disabled', false);
            $('#divpuxador :input').prop('disabled', false);
          }

          selectPuxador.show();
        },
        error: function(xhr) {
          console.log(xhr.statusText);
        }
      });
    } else {
      $('#id_puxador').empty();
      $('#divpuxador :input').prop('disabled', true);
    }
  }
});
</script>

<script>
$(document).ready(function() {
  $('#id_perfil').change(function() {
    buscarVidro();
  });

  function buscarVidro() {
  var perfil = $('#id_perfil').val();

  if (perfil) {
    var vidro = $('#id_vidro').val();

    $.ajax({
      url: '/buscar_Vidro/',
      type: 'GET',
      data: {
        vidro: vidro
      },
      success: function(response) {
        var selectVidro = $('#id_vidro');
        selectVidro.empty();

        var option = $('<option>').attr('value', '').text('-------');
        selectVidro.append(option);

        $.each(response, function(index, item) {
          option = $('<option>').attr('value', item.id).text(item.descricao);
          selectVidro.append(option);
        });

        var numItens = response.length;

        if (numItens <= 0) {
          selectVidro.prop('disabled', true);
          $('#divvidro :input').prop('disabled', true);
        } else {
          selectVidro.prop('disabled', false);
          $('#divvidro :input').prop('disabled', false);
        }

        selectVidro.show();
      },
      error: function(xhr) {
        console.log(xhr.statusText);
      }
    });
  } else {
    $('#id_vidro').empty();
    $('#divvidro :input').prop('disabled', true);
  }
}
});
</script>

<script>
$(document).ready(function() {
  $('#id_acabamento, #id_abertura').change(function() {
    // Limpar e bloquear os campos da divportas, exceto o campo perfil
    $('#divportas input:not(#id_perfil), #divportas select:not(#id_perfil)').val('').prop('disabled', true);

    // Verificar se os campos obrigat√≥rios est√£o preenchidos
    var quantidade = $('#id_quantidade').val();
    var largura = $('#id_largura').val();
    var altura = $('#id_altura').val();
    var acabamento = $('#id_acabamento').val();
    var abertura = $('#id_abertura').val();

    if ($('#btnPortaGiro').is(':checked')) {
        if (quantidade && largura && altura && acabamento && abertura) {
          // Desbloquear o campo perfil
          $('#id_perfil').prop('disabled', false);
        }
    }
    if ($('#btnPortaCorrer').is(':checked')) {
        if (quantidade && largura && altura && acabamento) {
          // Desbloquear o campo perfil
          $('#id_perfil').prop('disabled', false);
        }
    }
  });
});
</script>

<script>
  document.addEventListener('DOMContentLoaded', function() {
    var btnPortaGiro = document.getElementById('btnPortaGiro');
    var btnPortaCorrer = document.getElementById('btnPortaCorrer');
    var btnDivisoria = document.getElementById('btnDivisoria');
    var btnVidro = document.getElementById('btnVidro');
    var campoLinha = document.getElementById('divlinha');
    var campoAcabamento = document.getElementById('divacabamento');
    var campoAbertura = document.getElementById('divabertura');
    var campoPorta = document.getElementById('divportas');
    var campoDivisoria = document.getElementById('divambiente');
    var campoVidro = document.getElementById('divvidros');

    btnPortaGiro.addEventListener('change', function() {
      limparCampos();
      campoAcabamento.classList.remove('d-none');
      campoAbertura.classList.remove('d-none');
      campoLinha.classList.add('d-none');
      campoPorta.classList.remove('hidden');
      campoDivisoria.classList.add('hidden');
      campoVidro.classList.add('hidden');
    });

    btnPortaCorrer.addEventListener('change', function() {
      limparCampos();
      campoLinha.classList.add('d-none');
      campoAbertura.classList.add('d-none');
      campoAcabamento.classList.remove('d-none');
      campoPorta.classList.remove('hidden');
      campoDivisoria.classList.add('hidden');
      campoVidro.classList.add('hidden');
    });

    btnDivisoria.addEventListener('change', function() {
      limparCampos();
      campoAcabamento.classList.remove('d-none');
      campoLinha.classList.remove('d-none');
      campoAbertura.classList.add('d-none');
      campoPorta.classList.add('hidden');
      campoDivisoria.classList.remove('hidden');
      campoVidro.classList.add('hidden');
    });

    btnVidro.addEventListener('change', function() {
      limparCampos();
      campoLinha.classList.add('d-none');
      campoAbertura.classList.add('d-none');
      campoAcabamento.classList.add('d-none');
      campoPorta.classList.add('hidden');
      campoDivisoria.classList.add('hidden');
      campoVidro.classList.remove('hidden');
    });

    function limparCampos() {
      var camposPorta = document.getElementById('divportas').getElementsByTagName('input');
      var selectsPorta = document.getElementById('divportas').getElementsByTagName('select');

      for (var i = 0; i < camposPorta.length; i++) {
        camposPorta[i].value = '';
        camposPorta[i].disabled = true;
      }
      for (var i = 0; i < selectsPorta.length; i++) {
        selectsPorta[i].value = '';
        selectsPorta[i].disabled = true;
      }

      var camposDivisoria = document.getElementById('divambiente').getElementsByTagName('input');
      var selectsDivisoria = document.getElementById('divambiente').getElementsByTagName('select');

      for (var i = 0; i < camposDivisoria.length; i++) {
        camposDivisoria[i].value = '';
        camposDivisoria[i].disabled = true;
      }
      for (var i = 0; i < selectsDivisoria.length; i++) {
        selectsDivisoria[i].value = '';
        selectsDivisoria[i].disabled = true;
      }

      var camposVidro = document.getElementById('divvidros').getElementsByTagName('input');
      var selectsVidro = document.getElementById('divvidros').getElementsByTagName('select');

      for (var i = 0; i < camposVidro.length; i++) {
        camposVidro[i].value = '';
        camposVidro[i].disabled = true;
      }
      for (var i = 0; i < selectsVidro.length; i++) {
        selectsVidro[i].value = '';
      }

      var campoAcabamento = document.getElementById('id_acabamento');
      var campoAbertura = document.getElementById('id_abertura');
      var campoLinha = document.getElementById('id_linha');

      campoAcabamento.value = '';
      campoAcabamento.disabled = false;

      campoAbertura.value = '';
      campoAbertura.disabled = false;

      campoLinha.value = '';
      campoLinha.disabled = false;
    }
  });
</script>

<script>
  $(document).ready(function() {
    $("#id_perfilpuxador").change(function() {
      var perfilPuxador = $(this).val();
      var puxadorField = $("#id_puxador");
      var qtdpuxadorField = $("#qtd-puxador");
      var posicaopuxadorField = $("#posicao-puxador");
      var tamanhopuxadorField = $("#tam-puxador");

      if (perfilPuxador && perfilPuxador !== "") {
      puxadorField.prop('disabled', true);
      qtdpuxadorField.prop('disabled', true);
      posicaopuxadorField.prop('disabled', true);
      tamanhopuxadorField.prop('disabled', true);
      } else {
        if (puxadorField.children().length > 1) {
            puxadorField.prop('disabled', false);
            qtdpuxadorField.prop('disabled', false);
            posicaopuxadorField.prop('disabled', false);
            tamanhopuxadorField.prop('disabled', false);
        }
      }

      // Clear the related fields
      $("#qtd-perfilpuxador").val('');
      $("#posicao-perfilpuxador").val('');
    });

    $("#id_puxador").change(function() {
      var puxador = $(this).val();
      var perfilPuxadorField = $("#id_perfilpuxador");
      var qtdperfilPuxadorField = $("#qtd-perfilpuxador");
      var posicaoperfilPuxadorField = $("#posicao-perfilpuxador");

      if (puxador && puxador !== "") {
      perfilPuxadorField.prop('disabled', true);
      qtdperfilPuxadorField.prop('disabled', true);
      posicaoperfilPuxadorField.prop('disabled', true);
      } else {
        if (perfilPuxadorField.children().length > 1) {
            perfilPuxadorField.prop('disabled', false);
            qtdperfilPuxadorField.prop('disabled', false);
            posicaoperfilPuxadorField.prop('disabled', false);
        }
      }

      $("#qtd-puxador").val('');
      $("#posicao-puxador").val('');
      $("#tam-puxador").val('');
    });

    $("#id_perfil").change(function() {
      var perfil = $(this).val();
      var campoVidro = $("#id_vidro");

      if (perfil && perfil !== "") {
        campoVidro.prop('disabled', false);
      } else {
        campoVidro.prop('disabled', true);
      }
    });
  });
</script>

<script>
$(document).ready(function() {

  $("#id_divisor").change(function() {
    var divisor = $(this).val();
    var qtdDivisor = $("#qtd-divisor");

    qtdDivisor.empty();

    if (divisor && divisor !== "") {
      qtdDivisor.empty();
      qtdDivisor.append($('<option>', {value: '1', text: '1'}));
      qtdDivisor.append($('<option>', {value: '2', text: '2'}));
      qtdDivisor.prop('disabled', false);
    }
  });
});
</script>

<script>
$(document).ready(function() {

  $("#Selectambientedivisor").change(function() {
    var divisor = $(this).val();
    var qtdDivisor = $("#qtd-divisorambiente");

    qtdDivisor.empty();

    if (divisor && divisor !== "") {
      qtdDivisor.empty();
      qtdDivisor.append($('<option>', {value: '1', text: '1'}));
      qtdDivisor.append($('<option>', {value: '2', text: '2'}));
      qtdDivisor.prop('disabled', false);
    }
  });
});
</script>

<script>
$(document).ready(function() {
  // Fun√ß√µes reutiliz√°veis
  function carregarOpcoes(selectElement, data) {
    selectElement.empty();
    var option = $('<option>').attr('value', '').text('-------');
    selectElement.append(option);

    if (data.length > 0) {
      $.each(data, function(index, item) {
        option = $('<option>').attr('value', item.id).text(item.descricao);
        selectElement.append(option);
      });

      selectElement.prop('disabled', false);
      selectElement.show();
    } else {
      selectElement.prop('disabled', true);
    }
  }

  function realizarRequisicao(url, params, successCallback) {
    $.ajax({
      url: url,
      type: 'GET',
      data: params,
      success: successCallback,
      error: function(xhr) {
        console.log(xhr.statusText);
      }
    });
  }

  // Filtrar Divisoria
  $('#id_acabamento, #id_quantidade, #id_largura, #id_altura, #id_linha').change(filtrarDivisoria);

  function filtrarDivisoria() {
    var acabamento = $('#id_acabamento').val();
    var quantidade = $('#id_quantidade').val();
    var largura = $('#id_largura').val();
    var altura = $('#id_altura').val();
    var linha = $('#id_linha').val();
    var divsuperiorField = $('#Selectambientesuperior');
    var divinferiorField = $('#Selectambienteinferior');
    var divlateralField = $('#Selectambientelateral');
    var divdivisorField = $('#Selectambientedivisor');
    var campoDivisoria = $('#divambiente');
    var divisoriaRadioButton = $('#btnDivisoria');
    var idDivisoriaAmbiente = $('#id_divisoriaambiente');

    if (divisoriaRadioButton.is(':checked')) {
      if (quantidade && largura && altura && acabamento && linha) {
        divsuperiorField.prop('disabled', false);
        idDivisoriaAmbiente.find(':input').prop('disabled', false);

        realizarRequisicao('/filtrar_divisoria/', { acabamento: acabamento, linha: linha }, function(response) {
          carregarOpcoes(divsuperiorField, response);
          carregarDivinferior(acabamento, linha);
          carregarDivlateral(acabamento, linha);
          carregarDivdivisor(acabamento, linha);

          var rgb = $('#id_acabamento option:selected').data('rgb');
          $('.st5').attr('fill', rgb);
        });
      } else {
        idDivisoriaAmbiente.prop('disabled', true);
        idDivisoriaAmbiente.find(':input').prop('disabled', true);
      }
    } else {
      idDivisoriaAmbiente.prop('disabled', true);
      idDivisoriaAmbiente.find(':input').prop('disabled', true);
    }
  }

  // Carregar Divinferior
  function carregarDivinferior(acabamento, linha) {
    var divinferiorField = $('#Selectambienteinferior');

    realizarRequisicao('/carregar_divinferior/', { acabamento: acabamento, linha: linha }, function(response) {
      carregarOpcoes(divinferiorField, response);
    });
  }

  // Carregar Divlateral
  function carregarDivlateral(acabamento, linha) {
    var divlateralField = $('#Selectambientelateral');

    realizarRequisicao('/carregar_divlateral/', { acabamento: acabamento, linha: linha }, function(response) {
      carregarOpcoes(divlateralField, response);
    });
  }

  // Carregar Divdivisor
  function carregarDivdivisor(acabamento, linha) {
    var divdivisorField = $('#Selectambientedivisor');

    realizarRequisicao('/carregar_divdivisor/', { acabamento: acabamento, linha: linha }, function(response) {
      carregarOpcoes(divdivisorField, response);
    });
  }

  // Obter acabamentos DivisoriaAmbiente
  $('#btnDivisoria').change(obterAcabamentosDivisoriaAmbiente);

  function obterAcabamentosDivisoriaAmbiente() {
    realizarRequisicao('/obter_acabamentos_divisoria_ambiente/', {}, function(response) {
      var selectAcabamento = $('#id_acabamento');
      selectAcabamento.empty();

      if (response.acabamentos.length > 0) {
        $.each(response.acabamentos, function(index, item) {
          var option = $('<option>').attr('value', item.id).text(item.acabamento);
          option.data('rgb', item.codigo_rgb);
          selectAcabamento.append(option);
        });

        selectAcabamento.prop('disabled', false);
        selectAcabamento.show();
      } else {
        selectAcabamento.prop('disabled', true);
        selectAcabamento.hide();
      }
    });
  }

  // Obter acabamentos
  $('#btnPortaGiro, #btnPortaCorrer').change(obterAcabamentos);

  function obterAcabamentos() {
    realizarRequisicao('/obter_acabamentos/', {}, function(response) {
      var selectAcabamento = $('#id_acabamento');
      selectAcabamento.empty();

      if (response.acabamentos.length > 0) {
        $.each(response.acabamentos, function(index, item) {
          var option = $('<option>').attr('value', item.id).text(item.acabamento);
          selectAcabamento.append(option);
        });

        selectAcabamento.prop('disabled', false);
        selectAcabamento.show();
      } else {
        selectAcabamento.prop('disabled', true);
        selectAcabamento.hide();
      }
    });
  }

  // Buscar Vidro
  $('#Selectambientesuperior').change(buscarVidro);

  function buscarVidro() {
    var divsuperior = $('#Selectambientesuperior').val();

    if (divsuperior) {
      var vidro = $('#Selectambientevidro').val();

      realizarRequisicao('/buscar_Vidro/', { vidro: vidro }, function(response) {
        var selectVidro = $('#Selectambientevidro');
        carregarOpcoes(selectVidro, response);

        if (response.length > 0) {
          selectVidro.prop('disabled', false);
          selectVidro.show();
        } else {
          selectVidro.prop('disabled', true);
          selectVidro.hide();
        }
      });
    } else {
      $('#Selectambientevidro').empty();
      $('#divambientevidro :input').prop('disabled', true);
    }
  }

  filtrarDivisoria();
  obterAcabamentos();
});

</script>

<script>
    $(document).ready(function () {
        $('#id_acabamento').on('change', function () {
            console.log('Evento de mudan√ßa disparado!');
            var acabamentoID = $(this).val();

            var svgObject = document.getElementById('svgObject');
            var svgDocument = svgObject.contentDocument;

            // Enviar mensagem para o documento SVG dentro do <object>
            svgDocument.postMessage(acabamentoID, '*');
        });

        // Evento de mensagem recebida do documento SVG
        window.addEventListener('message', function(event) {
            var codigoRGB = event.data;
            console.log('C√≥digo RGB recebido:', codigoRGB);

            // Atualizar a classe .st5 no documento pai
            $('.st5', svgObject.contentDocument).attr('fill', codigoRGB);
        });
    });
</script>


{% endblock %}

